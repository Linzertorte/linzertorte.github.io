
<!DOCTYPE html>
<html>
<head>
<title>Yihan</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<style>
    body {
        margin-left:20%;
        margin-right:20%;
    }
    img {
        width:100%;
    }
    #page_num{
            display: none;
    }
    @media only screen and (max-width: 768px) {
        body {
            padding-left:8px;
            margin-left:0%;
            margin-right:0%;
        }
        img {
            width:100%;
        }
        #page_num{
            display: inline;
        }
    }
    @media only screen and (min-device-width: 768px) and (max-device-width: 1024px) {
        body {
            margin-left:10%;
            margin-right:10%;
        }
        img {
            width:100%;
        }
    }
</style>
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
</head>
<body>
<h1>Yihan</h1>
<input type="text" id="word" name="word"><button type="button" id="btn">Search</button>
<div>
<button type="button" id="prev">Prev</button>
<button type="button" id="next">Next</button>
<span id="page_num"></span>
</div>
<div id="page"></div>
</body>
<script charset="utf-8">
word_list = `
a
abbastanza
abbreviare
abominevole
accecare
accidente
accontentare
accusato
acrobatica
addirittura
adenite
adriatico
aerospaziale
affermare
affilatrice
affratellare
aggio
agguantare
agricolo
albero
alieno
allegoria
alloro
alterato
altro
ambedue
ammaestrato
ammiraglia
amnesia
analogo
andare
anguilla
annebbiato
annunciato
anticamera
antimuffa
anzitutto
apparecchiatura
appetito
apposizione
appuntito
arcano
argenteo
armare
arredare
arrostito
articolo
asfaltare
assalto
assicurativo
assolvere
astro
attaccato
atterrire
attorno
augurare
autocentro
autorete
avarizia
avvelenare
avvincente
babbo
bagno
balzare
bar
barrito
bastoncino
battuto
bellavista
benedetto
benvenuto
biancospino
bilanciere
birrario
blindare
bolla
boreale
bracciale
brevettato
brodo
bruscolo
bugia
buonora
cabina
cadetto
calce
calendola
calunniare
cameraman
campeggiatore
cancellino
cannoneggiare
capacitare
capobanda
Capricorno
carcerato
caricato
carogna
cartello
caso
`

var cur_page = 0;
function clean_word(word) {

    word = word.toLowerCase();
    word = word.replaceAll("á","a");
    word = word.replaceAll("à","a");
    word = word.replaceAll("é","e");
    word = word.replaceAll("è","e");
    word = word.replaceAll("í","i");
    word = word.replaceAll("ì","i");
    word = word.replaceAll("ó","o");
    word = word.replaceAll("ò","o");
    word = word.replaceAll("ú","u");
    word = word.replaceAll("ù","u");
    word = word.replace(/^\s+|\s+$/g,'');

    word = word.replaceAll("-", "");
    word = word.replaceAll("!", "");
    word = word.replaceAll(" ", "");
    return word;
}

var words = word_list.split("\n").filter((word) => word.length > 0);;
//console.log(words);
const zeroPad = (num, places) => String(num).padStart(places, '0')

var pic_prefix = "https://langenscheidt.s3.amazonaws.com/yihan-";
//var pic_prefix = "yihan-";

function get_cur_page(words,word) {
    if(word[0]=="ñ") {
        return 649;
    }
    word = clean_word(word);
    var i = 0;
    for(i = 0; i < words.length; i += 1) {
        words[i] = clean_word(words[i]);
    }
    i = 0
    while(i < words.length && (words[i]=='$' || words[i] <= word)){
        i+=1;
    }
    if(i>0) i-=1;
    while (i>=0 && words[i]=='$'){
        i-=1;
    }
    return i;
}

$("#btn").on("click", function (e) {
    var word =  document.getElementById("word").value;
    cur_page = get_cur_page(words,word);
    var html = "<img src=\""+pic_prefix+zeroPad(cur_page+1,3)+".png\">"
    $("#page").html(html)
    $("#page_num").text(cur_page + 15);
});
$("#prev").on("click", function (e) {
    if(cur_page > 0) {
        cur_page -= 1;
        var html = "<img src=\""+pic_prefix+zeroPad(cur_page+1,3)+".png\">"
        $("#page").html(html)
        $("#page_num").text(cur_page + 15);
    }
});
$("#next").on("click", function (e) {
    if(cur_page < words.length - 1){
        cur_page += 1;
        var html = "<img src=\""+pic_prefix+zeroPad(cur_page+1,3)+".png\">"
        $("#page").html(html)
        $("#page_num").text(cur_page + 15);
    }
});
</script>
</html>

